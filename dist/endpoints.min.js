!function(a,b){"function"==typeof define&&define.amd?define(["underscore"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("underscore")):a.Endpoints=b(a.underscore)}(this,function(){var a;a=function(){function a(a){return"function"==typeof a&&d.test(a)}var b=Object.prototype,c=b.toString,d=RegExp("^"+String(c).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return a}();var b;b=function(){var a={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return a}();var c;c=function(a){function b(b){return!(!b||!a[typeof b])}return b}(b);var d;d=function(){function a(){}return a}();var e;e=function(a,b){function c(a){return b(a)?d(a):{}}var d=a(d=Object.create)&&d;return d||(c=function(){function a(){}return function(c){if(b(c)){a.prototype=c;var d=new a;a.prototype=null}return d||window.Object()}}()),c}(a,c,d);var f;f=function(a,b){var c={configurable:!1,enumerable:!1,value:null,writable:!1},d=function(){try{var b={},c=a(c=Object.defineProperty)&&c,d=c(b,b,b)&&c}catch(e){}return d}(),e=d?function(a,b){c.value=b,d(a,"__bindData__",c)}:b;return e}(a,d);var g;g=function(){function a(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}return a}();var h;h=function(a,b,c,d){function e(e){function f(){if(i){var c=d(i);g.apply(c,arguments)}if(this instanceof f){var e=a(h.prototype),k=h.apply(e,c||arguments);return b(k)?k:e}return h.apply(j,c||arguments)}var h=e[0],i=e[2],j=e[4];return c(f,e),f}var f=[],g=f.push;return e}(e,c,f,g);var i;i=function(a,b,c,d){function e(f){function h(){var c=o?m:this;if(k){var f=d(k);g.apply(f,arguments)}if((l||q)&&(f||(f=d(arguments)),l&&g.apply(f,l),q&&f.length<n))return j|=16,e([i,r?j:-4&j,f,null,m,n]);if(f||(f=arguments),p&&(i=c[s]),this instanceof h){c=a(i.prototype);var t=i.apply(c,f);return b(t)?t:c}return i.apply(c,f)}var i=f[0],j=f[1],k=f[2],l=f[3],m=f[4],n=f[5],o=1&j,p=2&j,q=4&j,r=8&j,s=i;return c(h,f),h}var f=[],g=f.push;return e}(e,c,f,g);var j;j=function(){function a(a){return"function"==typeof a}var b="[object Function]",c=Object.prototype,d=c.toString;return a(/x/)&&(a=function(a){return"function"==typeof a&&d.call(a)==b}),a}();var l;l=function(a,b,c,d){function e(f,i,j,k,l,m){var n=1&i,o=2&i,p=4&i,q=16&i,r=32&i;if(!o&&!c(f))throw new TypeError;q&&!j.length&&(i&=-17,q=j=!1),r&&!k.length&&(i&=-33,r=k=!1);var s=f&&f.__bindData__;if(s&&s!==!0)return s=d(s),s[2]&&(s[2]=d(s[2])),s[3]&&(s[3]=d(s[3])),!n||1&s[1]||(s[4]=l),!n&&1&s[1]&&(i|=8),!p||4&s[1]||(s[5]=m),q&&g.apply(s[2]||(s[2]=[]),j),r&&h.apply(s[3]||(s[3]=[]),k),s[1]|=i,e.apply(null,s);var t=1==i||17===i?a:b;return t([f,i,j,k,l,m])}var f=[],g=f.push,h=f.unshift;return e}(h,i,j,g);var m;m=function(a){var b=/\bthis\b/,c="[object Arguments]",d="[object Object]",e=[],f=Error.prototype,g=Object.prototype,h=g.toString,i=g.propertyIsEnumerable,j={};return function(){var g=function(){this.x=1},k={0:1,length:1},l=[];g.prototype={valueOf:1,y:1};for(var m in new g)l.push(m);for(m in arguments);j.argsClass=h.call(arguments)==c,j.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),j.enumErrorProps=i.call(f,"message")||i.call(f,"name"),j.enumPrototypes=i.call(g,"prototype"),j.funcDecomp=!a(window.WinRTError)&&b.test(function(){return this}),j.funcNames="string"==typeof Function.name,j.nonEnumArgs=0!=m,j.nonEnumShadows=!/valueOf/.test(l),j.ownLast="x"!=l[0],j.spliceObjects=(e.splice.call(k,0,1),!k[0]),j.unindexedChars="x"[0]+Object("x")[0]!="xx";try{j.nodeClass=!(h.call(document)==d&&!({toString:0}+""))}catch(n){j.nodeClass=!0}}(1),j}(a);var n;n=function(a,b){function c(c,d){return arguments.length>2?a(c,17,b(arguments,2),null,d):a(c,1,null,null,d)}return c}(l,g,m);var o;o=function(){function a(a){return a}return a}();var p;p=function(a,b,c,d){function e(e,i,j){if("function"!=typeof e)return b;if("undefined"==typeof i||!("prototype"in e))return e;var k=e.__bindData__;if("undefined"==typeof k&&(d.funcNames&&(k=!e.name),k=k||!d.funcDecomp,!k)){var l=h.call(e);d.funcNames||(k=!f.test(l)),k||(k=g.test(l),c(e,k))}if(k===!1||k!==!0&&1&k[1])return e;switch(j){case 1:return function(a){return e.call(i,a)};case 2:return function(a,b){return e.call(i,a,b)};case 3:return function(a,b,c){return e.call(i,a,b,c)};case 4:return function(a,b,c,d){return e.call(i,a,b,c,d)}}return a(e,i)}var f=/^\s*function[ \n\r\t]+\w/,g=/\bthis\b/,h=Function.prototype.toString;return e}(n,o,f,m);var q;q=function(){var a={};return a}();var r;r=function(a){function b(a){return a&&"object"==typeof a&&"number"==typeof a.length&&e.call(a)==c||!1}var c="[object Arguments]",d=Object.prototype,e=d.toString,f=d.hasOwnProperty,g=d.propertyIsEnumerable;return a.argsClass||(b=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&f.call(a,"callee")&&!g.call(a,"callee")||!1}),b}(m);var s;s=function(a){var b="[object Array]",c=Object.prototype,d=c.toString,e=a(e=Array.isArray)&&e,f=e||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&d.call(a)==b||!1};return f}(a);var t;t=function(){function a(a){return"string"==typeof a||a&&"object"==typeof a&&d.call(a)==b||!1}var b="[object String]",c=Object.prototype,d=c.toString;return a}();var u;u=function(a){var b=function(b){var c="var index, iterable = "+b.firstArg+", result = "+b.init+";\nif (!iterable) return result;\n"+b.top+";";b.array?(c+="\nvar length = iterable.length; index = -1;\nif ("+b.array+") {  ",a.unindexedChars&&(c+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),c+="\n  while (++index < length) {\n    "+b.loop+";\n  }\n}\nelse {  "):a.nonEnumArgs&&(c+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+b.loop+";\n    }\n  } else {  "),a.enumPrototypes&&(c+="\n  var skipProto = typeof iterable == 'function';\n  "),a.enumErrorProps&&(c+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var d=[];if(a.enumPrototypes&&d.push('!(skipProto && index == "prototype")'),a.enumErrorProps&&d.push('!(skipErrorProps && (index == "message" || index == "name"))'),b.useHas&&b.keys)c+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",d.length&&(c+="    if ("+d.join(" && ")+") {\n  "),c+=b.loop+";    ",d.length&&(c+="\n    }"),c+="\n  }  ";else if(c+="\n  for (index in iterable) {\n",b.useHas&&d.push("hasOwnProperty.call(iterable, index)"),d.length&&(c+="    if ("+d.join(" && ")+") {\n  "),c+=b.loop+";    ",d.length&&(c+="\n    }"),c+="\n  }    ",a.nonEnumShadows){for(c+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)c+="\n    index = '"+b.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",b.useHas||(c+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),c+=") {\n      "+b.loop+";\n    }      ";c+="\n  }    "}return(b.array||a.nonEnumArgs)&&(c+="\n}"),c+=b.bottom+";\nreturn result"};return b}(m);var v;v=function(a,b,c,d,e,f,g){function h(){s.shadowedProps=i,s.array=s.bottom=s.loop=s.top="",s.init="iterable",s.useHas=!0;for(var h,j=0;h=arguments[j];j++)for(var k in h)s[k]=h[k];var l=s.args;s.firstArg=/^[^,]+/.exec(l)[0];var n=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+l+") {\n"+f(s)+"\n}");return n(a,m,t,x,b,c,d,e,s.keys,u,g,y,r,v,w)}var i=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],j="[object Array]",k="[object Boolean]",l="[object Date]",m="[object Error]",n="[object Function]",o="[object Number]",p="[object Object]",q="[object RegExp]",r="[object String]",s={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},t=Error.prototype,u=Object.prototype,v=String.prototype,w=u.toString,x=u.hasOwnProperty,y={};return y[j]=y[l]=y[o]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},y[k]=y[r]={constructor:!0,toString:!0,valueOf:!0},y[m]=y[n]=y[q]={constructor:!0,toString:!0},y[p]={constructor:!0},function(){for(var a=i.length;a--;){var b=i[a];for(var c in y)x.call(y,c)&&!x.call(y[c],b)&&(y[c][b]=!1)}}(),h}(p,q,r,s,t,u,b);var w;w=function(a){var b=a({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"});return b}(v);var x;x=function(a,b,c,d,e){var f=b(f=Object.keys)&&f,g=f?function(b){return c(b)?e.enumPrototypes&&"function"==typeof b||e.nonEnumArgs&&b.length&&a(b)?d(b):f(b):[]}:d;return g}(r,a,c,w,m);var y;y=function(a){var b={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:a,loop:"if (callback(iterable[index], index, collection) === false) return result"};return b}(x);var z;z=function(a,b){var c=a(b);return c}(v,y);var A;A=function(a,b,c){function d(a,d,e){if(d&&"undefined"==typeof e&&c(a))for(var f=-1,g=a.length;++f<g&&d(a[f],f,a)!==!1;);else b(a,d,e);return a}return d}(p,z,s);var B;B=function(a){var b={top:"if (!objectTypes[typeof iterable]) return result;\n"+a.top,array:!1};return b}(y);var C;C=function(a,b,c){var d=a(b,c);return d}(v,y,B);var D;D=function(a,b,c){var d=a(b,c,{useHas:!1});return d}(v,y,B);var E;E=function(){function a(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}return a}();var F;F=function(a,b,c,d,e){function f(f){var h,k;return!f||i.call(f)!=g||(h=f.constructor,c(h)&&!(h instanceof h))||!e.argsClass&&b(f)||!e.nodeClass&&d(f)?!1:e.ownLast?(a(f,function(a,b,c){return k=j.call(c,b),!1}),k!==!1):(a(f,function(a,b){k=b}),"undefined"==typeof k||j.call(f,k))}var g="[object Object]",h=Object.prototype,i=h.toString,j=h.hasOwnProperty;return f}(D,r,j,E,m);var G;G=function(a,b,c,d){var e="[object Object]",f=Object.prototype,g=f.toString,h=b(h=Object.getPrototypeOf)&&h,i=h?function(f){if(!f||g.call(f)!=e||!d.argsClass&&a(f))return!1;var i=f.valueOf,j=b(i)&&(j=h(i))&&h(j);return j?f==j||h(f)==j:c(f)}:c;return i}(r,a,F,m);var H;H=function(a,b,c,d){function e(f,g,h,i,j){(c(g)?a:b)(g,function(a,b){var g,k,l=a,m=f[b];if(a&&((k=c(a))||d(a))){for(var n=i.length;n--;)if(g=i[n]==a){m=j[n];break}if(!g){var o;h&&(l=h(m,a),(o="undefined"!=typeof l)&&(m=l)),o||(m=k?c(m)?m:[]:d(m)?m:{}),i.push(a),j.push(m),o||e(m,a,h,i,j)}}else h&&(l=h(m,a),"undefined"==typeof l&&(l=a)),"undefined"!=typeof l&&(m=l);f[b]=m})}return e}(A,C,s,G);var I;I=function(){var a=[];return a}();var J;J=function(a){function b(){return a.pop()||[]}return b}(I);var K;K=function(){var a=40;return a}();var L;L=function(a,b){function c(c){c.length=0,a.length<b&&a.push(c)}return c}(I,K);var M;M=function(a,b,c,d,e,f){function g(g){var h=arguments,i=2;if(!d(g))return g;if("number"!=typeof h[2]&&(i=h.length),i>3&&"function"==typeof h[i-2])var j=a(h[--i-1],h[i--],2);else i>2&&"function"==typeof h[i-1]&&(j=h[--i]);for(var k=f(arguments,1,i),l=-1,m=c(),n=c();++l<i;)b(g,k[l],j,m,n);return e(m),e(n),g}return g}(p,H,J,c,L,g);var N;N=function(a){var b={dataType:"json",timeout:5e3,headers:{"Content-Type":"application/json"}},c=function(c){this.original=a(b,c),this.reset()};return c.prototype.set=function(b){a(this.options,b)},c.prototype.reset=function(){this.options=a({},this.original)},c}(M);var O;O=function(a){var b={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:a,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"};return b}(x);var P;P=function(a,b){var c=a(b,{top:b.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});return c}(v,O);var Q;Q=function(a){function b(b,c){return a(c,16,[b])}return b}(l);var R;R=function(a){var b=function(b,c,d){var e=b[c]||function(){};"function"==typeof e&&(b[c]=a(function(){e.apply(b,arguments)},d))};return b}(Q);var S;S=function(){var a=function(a){var b="";for(var c in a)""!==b&&(b+="&"),b+=c+"="+a[c];return b};return a}();var T;T=function(a,b,c,d){var e=function(a,b,c,d,e){this.ajax=a,this.configuration=b,this.decorators=c,this.context=e;for(var f in d)this[f]=this._create(d[f])};return e.prototype._create=function(d){return a(function(a,e){var f=b({},this.configuration.options);f.url+=d.path,f.type=d.type,b(f,a),d.before&&d.before.call(this.context,f);for(var g in this.decorators)c(f,g,this.decorators[g]);return this["_"+d.type](f),e?f:this.ajax(f)},this)},e.prototype._GET=function(a){a.data&&(a.url+="?"+d(a.data),delete a.data)},e.prototype._POST=function(a){a.data&&(a.data=JSON.stringify(a.data))},e.prototype._DELETE=function(a){a.data&&(a.url+="?"+d(a.data),delete a.data)},e}(n,P,R,S);var U;return U=function(a,b){var c=function(b,d){var e=d.decorators||{},f=d.resources;delete d.decorators,delete d.resources;var g=new c.Configuration(d);this.configure=a(g.set,g),this.reset=a(g.reset,g);for(var h in f)this[h]=new c.Resource(b,g,e,f[h],this)};return c.Configuration=b,c.Resource=b,c}(n,N,T)});