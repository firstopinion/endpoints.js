!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(["jquery"],c):b[a]=c()}("endpoints",this,function(a){var b=function(){return{handler:function(a,b,c){return function(){return"[object Array]"!==Object.prototype.toString.call(b)?a.apply(b,arguments):a.apply(c,b.concat(Array.prototype.slice.call(arguments)))}}}}(),c=function(a,b){var c=function(a,b){for(var c in a)this[c]=this._create(a[c]);this.config=b};return c.prototype._create=function(c){return b.handler(function(b,d){var e=a.extend({},this.config.get("defaults"));return e.url+=c.path,e.type=c.type,b=a.extend(e,b),c.before&&c.before(b),this["_"+c.type](b),d?b:a.ajax(b)},this)},c.prototype._GET=function(b){b.data&&(b.url+="?"+a.param(b.data),delete b.data)},c.prototype._POST=function(a){a.data&&(a.data=JSON.stringify(a.data))},c.prototype._DELETE=function(b){b.data&&(b.url+="?"+a.param(b.data),delete b.data)},c}(a,b),d=function(){var a=function(){this.attr={}};return a.prototype.get=function(a){return this._getKey(a)},a.prototype.set=function(a,b){return 1==arguments.length?this._attr=a:this._setKey(a,b)},a.prototype._setKey=function(a,b){for(var c=a.split("."),d=0,e=c.length,f=this._attr;e>d;d++){if(e==d+1)return void(f[c[d]]=b);f[c[d]]||(f[c[d]]={}),f=f[c[d]]}},a.prototype._getKey=function(a){for(var b=a.split("."),c=0,d=b.length,e=this._attr;d>c;c++){if(d==c+1)return e[b[c]];if(!e[b[c]])throw new Error("Object "+b[c]+" does not exist");e=e[b[c]]}},a}(),e=function(a,b,c){var d=function(a){this.config=new c;for(var d in a.resources)this[d]=new b(a.resources[d],this.config);delete a.resources,this.config.set(a)};return d.prototype.authorize=function(b){var c=this.config.get("authorization"),d=a.extend({},c);delete d.endpoint,c.endpoint(a.extend(d,b))},d.prototype.set=function(a,b){this.config.set(a,b)},d}(a,c,d);return e});