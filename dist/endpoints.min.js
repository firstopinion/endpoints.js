!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(["jquery"],c):b[a]=c()}("endpoints",this,function(a){var b=function(){return{handler:function(a,b,c){return function(){return"[object Array]"!==Object.prototype.toString.call(b)?a.apply(b,arguments):a.apply(c,b.concat(Array.prototype.slice.call(arguments)))}},namespace:{loop:function(a,b,c){for(var d=b.split("."),e=0,f=d.length;f>e;e++){if(f==e+1)return void c.last(a,d,e);a[d[e]]||c.missing(a,d,e),a=a[d[e]]}},get:function(a,b){var c;return this.loop(a,b,{last:function(a,b,d){c=a[b[d]]},missing:function(a,b,c){throw new Error("Object "+b[c]+" does not exist")}}),c},set:function(a,b,c){this.loop(a,b,{last:function(a,b,d){a[b[d]]=c},missing:function(a,b,c){a[b[c]]={}}})}}}}(),c=function(a,b){var c=function(a,b){for(var c in a)this[c]=this._create(a[c]);this.config=b};return c.prototype._create=function(c){return b.handler(function(b,d){var e=a.extend({},this.config.get("defaults"));return e.url+=c.path,e.type=c.type,b=a.extend(e,b),c.before&&c.before(b),this["_"+c.type](b),d?b:a.ajax(b)},this)},c.prototype._GET=function(b){b.data&&(b.url+="?"+a.param(b.data),delete b.data)},c.prototype._POST=function(a){a.data&&(a.data=JSON.stringify(a.data))},c.prototype._DELETE=function(b){b.data&&(b.url+="?"+a.param(b.data),delete b.data)},c}(a,b),d=function(a){var b=function(){this.attr={}};return b.prototype.get=function(b){return a.namespace.get(this.attr,b)},b.prototype.set=function(b,c){return 1==arguments.length?this.attr=b:a.namespace.set(this.attr,b,c)},b}(b),e=function(a,b,c,d){var e=function(a){this.config=new d;for(var b in a.resources)this[b]=new c(a.resources[b],this.config);delete a.resources,this.config.set(a)};return e.prototype.authorize=function(c){var d=this.config.get("authorization"),e=a.extend({},d);delete e.endpoint;var f=b.namespace.get(this,d.endpoint);f(a.extend(e,c))},e.prototype.set=function(a,b){this.config.set(a,b)},e}(a,b,c,d);return e});