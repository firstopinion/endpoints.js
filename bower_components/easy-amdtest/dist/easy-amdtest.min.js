!function(a,b){a.EasyAMDTest=b()}(this,function(){var a=function(){var a=function(a){this.opts={};for(var b in this._defaults)this.opts[b]=this._defaults[b];for(var c in a)this.opts[c]=a[c]};return a.prototype._defaults={style:"bdd"},a.prototype.setup=function(){mocha.setup(this.opts.style),mocha.reporter("html")},a.prototype.run=function(){var a=window.mochaPhantomJS;return a?a.run():mocha.run()},a}(),b=function(){var a=function(a){var b=this;this.runner=a,this.failed=[],this.runner.on("fail",function(){b._onFail.apply(b,arguments)}),this.runner.on("end",function(){b._onEnd.apply(b,arguments)})};return a.prototype._onFail=function(a,b){this.failed.push({name:a.title,result:!1,message:b.message,stack:b.stack,titles:this._flattenTitles(a)})},a.prototype._onEnd=function(){window.mochaResults=this.runner.stats,window.mochaResults.reports=this.failed},a.prototype._flattenTitles=function(a){for(var b=[];a.parent.title;)b.unshift(a.parent.title),a=a.parent;return b},a}(),c=function(a,b){return{mocha:{Test:a,Reporter:b}}}(a,b),d=function(a){var b=function(a){this.configuration=a,this._configure(this._getBaseDir())};return b.prototype.run=function(b){var c=this;this.framework=a[b.name],this.test=new this.framework.Test(b.opts),require(["require",b.name],function(a){c.test.setup&&c.test.setup(),a(b.tests,function(){new c.framework.Reporter(c.test.run())})})},b.prototype._getBaseDir=function(){var a=window.location.href.toString(),b=a.slice(0,a.lastIndexOf("/"));return b.slice(0,b.lastIndexOf("/"))},b.prototype._configure=function(a){var b=this.configuration.paths;for(var c in b)b[c]=a+b[c];require.config(this.configuration)},b}(c);return d});